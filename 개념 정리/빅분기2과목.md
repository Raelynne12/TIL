## 1. 데이터 정제



**데이터 관련 정의**

- 데이터
- 단위(Unit)
- 관측값(Observation)
- 변수(Variable)
- 원자료



**데이터 종류**

1. 단변량자료 - 자료 특성 대표하는 특성 변수가 하나인 자료
2. 다변량자료 - 자료 특성 대표하는 특성 변수가 두 개 이상인 자료
3. 질적자료 - 정성적 or 범주형 자료 >> 부여된 수치의 크기 자체에는 의미부여 x
   - 명목자료 : 측정 대상이 범주나 종류에 대해 구분되어지는 것을 수치, 기호로 분류(≠, =)
   - 서열자료 : 명목자료랑 비슷하지만, 수치나 기호가 서열을 나타냄(≠, =, ≤, ≥)
4. 수치자료 - 정량적 or 연속형 자료 >> 숫자의 크기에 의미 부여할 수 있는 자료
   - 구간자료 : 명목자료, 서열자료 포함하면서 변수 간 산술적 의미 가짐(≠, =, ≤, ≥, +, -)
   - 비율자료 : 명목, 서열, 구간 다 포함하면서 비율의 개념 도입(≠, =, ≤, ≥, +, -, ×, ÷)
5. 시계열 자료
6. 횡적자료 - 특정 단일시점에서 여러 대상으로부터 수집된 자료(한 시점에서 여러 대상으로부터 취합)
7. 종적자료 - 시계열 + 횡적 > 여러 개체를 여러 시점에서 수집한 자료



**데이터 정제**

- 정제 과정 거치지 않은 데이터 문제점 	
  - 일관성 없어지므로 분석 처리 어려워짐
  - 도출된 결과 신뢰성 저하
- 데이터 정제 과정
  - 정형보다 비정형 데이터가 많기 때문에 구조화된 정형 데이터로 변환하고 결측치나 오류를 수정해야
- 전처리와 후처리
  - 전처리 : 대상 데이터와 입수방법 결정 및 저장방식 장소 선택
  - 후처리 : 저장 데이터의 품질관리 등의 과정 포함



**데이터 결측값 처리**

> 결측치를 임의로 제거 > 분석에 필요한 유의수준 데이터 수집에 실패할 수 ㅇ
>
> 결측치를 임의로 대체 > 편향이 발생해서 신뢰성 저하될 수 ㅇ



**결측 데이터 종류**

1. 완전 무작위 결측(MCAR)
   - 다른 변수와 아무런 연관이 없는 경우
   - 나이대와 성별과 체중에 관계없이 체중이 없는 경우 > 데이터 누락 > 완전 무작위 결측
2. 무작위 결측(MAR)
   - 연관되어 있지만, 그 자체가 비관측값들과는 연관되지 않은 경우
   - 여성은 체중 공개를 꺼려하는 경향 > 체중이 누락될 가능성이 성별에만 의존 > 무작위 결측
   - 젊은 여성은 체중 공개를 꺼려하는 경향 > 무작위 결측
3. 비 무작위 결측(NMAR)
   - 결측변수값이 결측여부와 관련이 있는 경우
   - 체중이 많이 나가는 사람들은 체중 공개를 꺼려하는 경향 > 체중이 누락될 가능성이 체중값 자체에 관찰되지 않는 값에 달려있음 > 비 무작위 결측 



**결측값 유형의 분석 및 대치**

> 결측치가 존재하는 데이터를 이용한 분석은 효율성 문제, 자료처리의 복잡성, 편향 문제가 발생

1. 단순대치법

   - 기본적으로 결측치에 대해서 MCAR 또는 MAR로 판단하고 처리
   - 완전 분석
     - 불완전 자료는 완전 무시
     - 용이성 보장하지만 효율성 상실, 통계적 추론의 타당성에 문제 발생
   - 평균 대치법
     - 표준오차가 과소 추정되는 단점
   - 회귀 대치법
   - 단순확률 대치법
     - Hot-deck방법
     - 평균 대치법 단점 보완
     - 확률 추출에 의해서 전체 데이터 중 무작위로 대치
   - 최근접 대치법
     - 응답이 여러 번 사용될 가능성 ㅇ
     - 몇 개의 대체군으로 분류 > 각 층에서 정리하고 결측값 바로 이전의 응답을 결측치로 대치

2. 다중 대치법

   - 단순대치를 복수로 수행

   1. 대치단계
   2. 분석단계
   3. 결합단계



**이상치 종류**

- 단변수 이상치
  - 하나의 데이터 분포에서 발생하는 이상치
- 다변수 이상치
  - 복수의 연결된 데이터 분포공간에서 발생하는 이상치



**이상치 발생 원인**

- 비자연적 이상치 발생
  - 입력실수
  - 측정오류
  - 실험오류
  - 의도적 이상치
  - 자료처리오류
  - 표본오류
    - 편향이 발생하는 경우
- 이외에 발생하는 이상치들은 자연적 이상치



**이상치 문제점**

1. 기초(통계적) 분석결과의 신뢰도 저하
   - 평균, 분산 등에 영향을 줌(중앙값은 영향 적음)
2. 기초통계에 기반한 다른 고급 통계분석의 신뢰성 저하
   - 검정 추정 등의 분석, 회귀분석에 영향을 줌

- 특히 이상치가 비무작위성을 가지고 나타나게 되면, 정상성 감소를 초래 > 데이터 자체의 신뢰성 저하로 연결



**이상치 탐지**

> 종속변수가 단변량인지 다변량인지, 데이터 분포를 고려해서 모수적인지 비모수적인지에 따라 갈림

1. 시각화를 통한 방법(비모수적, 단변량 경우)
   - 상자수염그림
   - 줄기 - 잎 그림
   - 산점도 그림
2. Z-Score를 통한 방법(모수적 단변량 or 저변량 경우)
   - 정규화를 통해 특정 쓰레드를 벗어난 경우를 이상치로
3. 밀도기반 클러스터링 방법(DBSCAN)(비모수적 다변량 경우)
   - 군집간 밀도 이용해서 데이터 수가 지정 개수 이상이면 군집으로 정의
   - 군집에서 먼거리에 있는 데이터는 이상치
4. 고립 의사나무 방법(비모수적 다변량 경우)
   - 의사결정나무 기반
   - 정상치의 단말 노드보다 이상치의 노드에 이르는 길이가 더 짧은 성질 이용



---



## 2. 분석 변수 처리



**변수별 모형 분류**

1. 전체 모형(FM) : 모든 독립변수 사용한 모형
2. 축소 모형(RM) : 전체 모형에서 사용된 변수의 개수를 줄여서 얻은 모형
3. 영 모형(NM) : 독립변수가 하나도 없는 모형



**변수 선택 방법**

1. 전진 선택법
   - 영모형에서 시작 > 종속변수와 단순상과계수의 절대값이 가장 큰 변수를 분석모형에 포함
   - 부분 F 검정 통해 유의성 검증 > 유의하지 않은 경우는 변수선택 없이 중단
   - 한 번 추가된 변수는 제거 안됨
2. 후진 선택법
   - 전체모델에서 시작 > 종속변수와 단순상관계수의 절대값이 가장 작은 변수를 분석 모형에 포함
   - 부분 F 검정 통해 유의성 검증 > 유의한 경우는 변수제거 없이 중단
   - 한 번 제거된 변수는 추가 안됨
3. 단계적 선택법
   - 전진과 후진 보완법
   - 전진으로 가장 유의한 변수 모형에 포함 > 나머지는 후진 선택법 > 새롭게 유의하지 않은 변수들 제거
   - 유의한 설명변수가 존재하지 않을 때까지 과정 반복



**차원 축소**

> 데이터 종류의 양을 줄이는 것



**차원 축소 필요성**

1. 복잡도의 축소
   - 분석시간 증가(시간복잡도)와 저장변수 양 증가(공간복잡도) 고려한다면 효율성 측면에서 데이터 종류 수 줄여야 함
2. 과적합 방지
   - 분석모델 파라미터의 증가 및 파라미터 간 복잡한 관계 증가로 과적합 발생 가능성 ㅇ
   - 정확도(신뢰도) 저하될 수 ㅇ
3. 해석력 확보
   - 차원이 작은 간단한 분석모델일수록 이해 쉽고 해석 쉬워짐
4. 차원의 저주
   - 알고리즘 통한 학습 위해 차원 증가하면서 학습데이터 수가 차원 수보다 적어져서 성능 저하됨
   - 차원 줄이거나 데이터 수 늘려야 함



**차원 축소 방법**

1. 요인 분석

   - 다수의 변수들 간 상관관계 분석해서 공통차원 축약하는 통계분석
   - 변수 특성 파악 : 관련된 변수들이 군집으로서 요인 간 상호 동립성 파악이 용이해짐
   - 독립변수, 종속변수 개념이 없음
   - 주성분 분석, 공통요인 분석 특이값 분해(SVD), 음수미포함 행렬분해(NMF) 등
   - 공통 요인 분석 : 변수들이 가지고 있는 공통분산만을 이용해서 공통요인만 추출

   1. 주성분 분석
      - 특성을 설명할 수 있는 하나 OR 복수 개의 특징(주성분) 찾는 것
      - 서로 연관성 있는 고차원공간의 데이터를 선형연관성이 없는 저차원으로 변환하는 과정(직교변환)
      - 2차원 좌표평면에 N개 점데이터들이 타원형으로 분포 > 분포 특성을 2개의 벡터로 설명
      - 어떠한 사전적 분포 가정의 요구 없음
      - 가장 큰 분산의 방향들이 주요 중심 관심으로 가정
      - 선형결합으로만 고려
      - 서로 상관 있을 때만 가능
      - 스케일에 대한 영향 큼 > 스케일링 필수
   2. 특이값 분해(SVD)
      - M = U∑Vt(전치)
      - U : 직교행렬
      - ∑ : m × n 대각행렬(행렬 대각성분 제외한 나머지 행렬 원소의 값이 모두 0)
      - Vt : n × n 직교행렬(열벡터가 독립)
      - 기존 A 정보를 SVD에 의해 3개의 행렬로 분해 > 적당한 k값(특이값)만을 이용해서 A랑 비슷한 정보력 가지는 차원 만들기
      - 몇 개의 특이값을 가지고도 충분히 유용한 정보를 유지할 수 있는 차원을 생성
   3. 음수 미포함 행렬분해(NMF)
      - 음수를 포함하지 않은 행렬 V를 음수를 포함하지 않은 두 행렬의 곱으로 분해
      - W의 열개수와 H의 행개수가 WH = V가 되도록
      - 이 둘의 오차를 U라고 하면 V = WH + U (U는 양수 음수 될 수 있음)
      - W, H의 크기가 V보다 작아서 저장하거나 다루기 좋음(곱해지는 행렬은 훨씬 적은 차원 가짐)



**파생변수 생성**

